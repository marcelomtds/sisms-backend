{"version":3,"sources":["./src/app/components/login/login.component.html","./src/app/components/login/login-routing.module.ts","./src/app/components/login/login.component.ts","./src/app/components/login/login.module.ts","./src/app/components/login/resolver/login.resolver.ts","./src/app/core/services/auth.service.ts"],"names":[],"mappings":"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","file":"components-login-login-module.js","sourcesContent":["export default \"<div class=\\\"row\\\">\\r\\n  <div class=\\\"col-xs-1 col-sm-4 col-md-4 col-lg-4\\\">\\r\\n  </div>\\r\\n  <div class=\\\"col-xs-10 col-sm-4 col-md-4 col-lg-4\\\">\\r\\n    <div class=\\\"row\\\" style=\\\"text-align: center;\\\">\\r\\n      <img src=\\\"../../../../assets/img/login.png\\\" width=\\\"120px\\\" height=\\\"120px\\\" alt=\\\"\\\">\\r\\n    </div>\\r\\n    <div class=\\\"row\\\">\\r\\n      <h1 style=\\\"text-align: center;\\\"><strong style=\\\"color: #3c8dbc;\\\">Sis</strong>MS</h1>\\r\\n    </div>\\r\\n    <div class=\\\"row\\\">\\r\\n      <h4 style=\\\"text-align: center;\\\">Sistema Gerenciador de Atendimentos</h4>\\r\\n    </div>\\r\\n    <div class=\\\"row\\\" style=\\\"margin-top: 10px;\\\">\\r\\n      <div class=\\\"col-xs-12 col-sm-12 col-md-12 col-lg-12\\\">\\r\\n        <form (ngSubmit)=\\\"onClickFormSubmit()\\\" [formGroup]=\\\"form\\\">\\r\\n          <div class=\\\"box box-primary\\\">\\r\\n            <div class=\\\"box-header with-border\\\">\\r\\n              <h3 class=\\\"box-title\\\">Credenciais do Acesso</h3>\\r\\n            </div>\\r\\n            <div class=\\\"box-body\\\">\\r\\n              <div class=\\\"row\\\">\\r\\n                <div class=\\\"col-xs-12 col-sm-12 col-md-12 col-lg-12\\\">\\r\\n                  <div class=\\\"form-group\\\">\\r\\n                    <label for=\\\"cpf\\\">CPF</label>\\r\\n                    <input type=\\\"text\\\" [validation]=\\\"false\\\" class=\\\"form-control\\\" id=\\\"cpf\\\" formControlName=\\\"cpf\\\"\\r\\n                      mask=\\\"000.000.000-00\\\">\\r\\n                    <app-message-required [isInvalidForm]=\\\"isInvalidForm\\\" [controlComponent]=\\\"form.get('cpf')\\\">\\r\\n                    </app-message-required>\\r\\n                  </div>\\r\\n                </div>\\r\\n              </div>\\r\\n              <div class=\\\"row\\\">\\r\\n                <div class=\\\"col-xs-12 col-sm-12 col-md-12 col-lg-12\\\">\\r\\n                  <div class=\\\"form-group\\\">\\r\\n                    <label for=\\\"senha\\\">Senha</label>\\r\\n                    <div class=\\\"input-group\\\">\\r\\n                      <input maxlength=\\\"20\\\" type=\\\"{{ isViewPassword ? 'text' : 'password' }}\\\" class=\\\"form-control\\\"\\r\\n                        id=\\\"senha\\\" formControlName=\\\"senha\\\">\\r\\n                      <div style=\\\"cursor: pointer;\\\" class=\\\"input-group-addon\\\" (click)=\\\"showHidePassword()\\\">\\r\\n                        <em class=\\\"{{ isViewPassword ? 'fa fa-eye-slash' : 'fa fa-eye' }}\\\"></em>\\r\\n                      </div>\\r\\n                    </div>\\r\\n                    <app-message-required [isInvalidForm]=\\\"isInvalidForm\\\" [controlComponent]=\\\"form.get('senha')\\\">\\r\\n                    </app-message-required>\\r\\n                  </div>\\r\\n                </div>\\r\\n              </div>\\r\\n            </div>\\r\\n            <div class=\\\"box-footer\\\">\\r\\n              <button type=\\\"submit\\\" class=\\\"btn btn-primary pull-right\\\" style=\\\"margin-left: 15px;\\\"><em\\r\\n                  class=\\\"fa fa-check\\\"></em>&nbsp;Entrar</button>\\r\\n            </div>\\r\\n          </div>\\r\\n        </form>\\r\\n      </div>\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\"","import { NgModule } from '@angular/core';\r\nimport { RouterModule, Routes } from '@angular/router';\r\nimport { LoginComponent } from './login.component';\r\nimport { LoginResolver } from './resolver/login.resolver';\r\n\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: LoginComponent,\r\n    resolve: {\r\n      LoginResolver\r\n    }\r\n  },\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n  providers: [LoginResolver]\r\n})\r\nexport class LoginRoutingModule { }\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\r\nimport { Router } from '@angular/router';\r\nimport { MenuService } from 'src/app/core/services/menu.service';\r\nimport { Autenticacao } from '../../core/model/model/autenticacao.model';\r\nimport { AuthService } from '../../core/services/auth.service';\r\nimport { MessageService } from '../../core/services/message.service';\r\nimport { SharedService } from '../../core/services/shared.service';\r\nimport { Messages } from '../../shared/messages/messages';\r\n\r\n@Component({\r\n  selector: 'app-login',\r\n  templateUrl: './login.component.html'\r\n})\r\nexport class LoginComponent implements OnInit {\r\n\r\n  public form: FormGroup;\r\n  public isViewPassword = false;\r\n  public isInvalidForm = false;\r\n\r\n  public constructor(\r\n    private service: AuthService,\r\n    private router: Router,\r\n    private messageService: MessageService,\r\n    private formBuilder: FormBuilder,\r\n    private sharedService: SharedService,\r\n    private menuService: MenuService,\r\n  ) {\r\n  }\r\n\r\n  public ngOnInit(): void {\r\n    this.onCreateForm();\r\n  }\r\n\r\n  public showHidePassword(): void {\r\n    this.isViewPassword = !this.isViewPassword;\r\n  }\r\n\r\n  public onCreateForm(): void {\r\n    this.form = this.formBuilder.group({\r\n      cpf: [null, Validators.required],\r\n      senha: [null, Validators.required]\r\n    });\r\n  }\r\n\r\n  public onClickFormSubmit(): void {\r\n    this.messageService.clearAllMessages();\r\n    if (this.form.valid) {\r\n      const formValue: Autenticacao = {\r\n        ...this.form.value\r\n      };\r\n      this.service.login(formValue).subscribe(response => {\r\n        this.sharedService.setUserSession(response.result.usuario);\r\n        this.sharedService.setTokenSession(response.result.token);\r\n        this.sharedService.updateTemplateSet(true);\r\n        this.router.navigate(['/home']);\r\n        this.menuService.setMenu();\r\n      });\r\n    } else {\r\n      this.isInvalidForm = true;\r\n      this.messageService.sendMessageError(Messages.MSG0004);\r\n    }\r\n  }\r\n\r\n}\r\n","import { CommonModule } from '@angular/common';\r\nimport { NgModule } from '@angular/core';\r\nimport { SharedModule } from 'src/app/shared/shared.module';\r\nimport { SismsCommonsModule } from '../sisms-commons.module';\r\nimport { LoginRoutingModule } from './login-routing.module';\r\nimport { LoginComponent } from './login.component';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    LoginComponent\r\n  ],\r\n  imports: [\r\n    CommonModule,\r\n    SismsCommonsModule,\r\n    LoginRoutingModule,\r\n    SharedModule\r\n  ]\r\n})\r\nexport class LoginModule { }\r\n","import { Injectable } from '@angular/core';\r\nimport { Resolve, Router } from '@angular/router';\r\nimport { SharedService } from 'src/app/core/services/shared.service';\r\n\r\n@Injectable()\r\nexport class LoginResolver implements Resolve<any> {\r\n\r\n    constructor(\r\n        private router: Router,\r\n        private sharedService: SharedService\r\n    ) { }\r\n\r\n    resolve(): any {\r\n        if (this.sharedService.isLoggedIn()) {\r\n            this.router.navigate(['/home']);\r\n            return;\r\n        }\r\n    }\r\n\r\n}\r\n","import { HttpClient } from '@angular/common/http';\r\nimport { Injectable } from '@angular/core';\r\nimport { Observable } from 'rxjs';\r\nimport { Autenticacao } from '../model/model/autenticacao.model';\r\nimport { CurrentAuthentication } from '../model/model/current-authentication.model';\r\nimport { Response } from '../model/model/response.model';\r\nimport { BaseService } from './base.service';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class AuthService extends BaseService<Autenticacao, {}> {\r\n\r\n  constructor(http: HttpClient) {\r\n    super(http, '/api/auth');\r\n  }\r\n\r\n  public login(form: Autenticacao): Observable<Response<CurrentAuthentication>> {\r\n    return this.http.post<Response<CurrentAuthentication>>(this.apiBaseUrl, form);\r\n  }\r\n\r\n}\r\n"],"sourceRoot":"webpack:///"}